<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_402) on Tue Apr 16 22:52:17 CEST 2024 -->
<title>UserService</title>
<meta name="date" content="2024-04-16">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UserService";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../services/gui/UploadUnmarshaller.html" title="class in services.gui"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../services/gui/WorkerService.html" title="class in services.gui"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?services/gui/UserService.html" target="_top">Frames</a></li>
<li><a href="UserService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">services.gui</div>
<h2 title="Class UserService" class="title">Class UserService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>services.gui.UserService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Singleton
public class <span class="typeNameLabel">UserService</span>
extends java.lang.Object</pre>
<div class="block">Service class mostly for Users controller. Handles everything around User.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#ADMIN_NAME">ADMIN_NAME</a></span></code>
<div class="block">Default admin name; the admin user is created during the first initialization of JATOS; don't confuse admin user
 with the Role ADMIN</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#ADMIN_PASSWORD">ADMIN_PASSWORD</a></span></code>
<div class="block">Default admin password; the admin user is created during the first initialization of JATOS; don't confuse admin
 user with the Role ADMIN</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#ADMIN_USERNAME">ADMIN_USERNAME</a></span></code>
<div class="block">Default admin username; the admin user is created during the first initialization of JATOS; don't confuse admin
 user with the Role ADMIN</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#bindToUserAndPersist-models.gui.NewUserModel-">bindToUserAndPersist</a></span>(<a href="../../models/gui/NewUserModel.html" title="class in models.gui">NewUserModel</a>&nbsp;newUserModel)</code>
<div class="block">Creates a user, sets password hash and persists him.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#changeAdminRole-java.lang.String-java.lang.Boolean-">changeAdminRole</a></span>(java.lang.String&nbsp;normalizedUsername,
               java.lang.Boolean&nbsp;admin)</code>
<div class="block">Adds or removes ADMIN role of the user with the given username and persists the change.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#changeSuperuserRole-java.lang.String-boolean-">changeSuperuserRole</a></span>(java.lang.String&nbsp;normalizedUsername,
                   boolean&nbsp;superuser)</code>
<div class="block">Adds or removes SUPERUSER role of the user with the given username and persists the change.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#createAndPersistUser-models.common.User-java.lang.String-boolean-models.common.User.AuthMethod-">createAndPersistUser</a></span>(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user,
                    java.lang.String&nbsp;password,
                    boolean&nbsp;adminRole,
                    <a href="../../models/common/User.AuthMethod.html" title="enum in models.common">User.AuthMethod</a>&nbsp;authMethod)</code>
<div class="block">Creates a user, sets password hash and persists them.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#removeUser-java.lang.String-">removeUser</a></span>(java.lang.String&nbsp;normalizedUsername)</code>
<div class="block">Removes the User belonging to the given username from the database.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../models/common/User.html" title="class in models.common">User</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#retrieveUser-java.lang.String-">retrieveUser</a></span>(java.lang.String&nbsp;normalizedUsername)</code>
<div class="block">Retrieves the user with the given username from the DB.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#setLastLogin-java.lang.String-">setLastLogin</a></span>(java.lang.String&nbsp;normalizedUsername)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#setLastSeen-models.common.User-">setLastSeen</a></span>(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user)</code>
<div class="block">Sets the time of the last activity of the given user</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#toggleActive-java.lang.String-boolean-">toggleActive</a></span>(java.lang.String&nbsp;normalizedUsername,
            boolean&nbsp;active)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../services/gui/UserService.html#updatePassword-models.common.User-java.lang.String-">updatePassword</a></span>(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user,
              java.lang.String&nbsp;newPassword)</code>
<div class="block">Change password and persist user.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ADMIN_USERNAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ADMIN_USERNAME</h4>
<pre>public static final&nbsp;java.lang.String ADMIN_USERNAME</pre>
<div class="block">Default admin username; the admin user is created during the first initialization of JATOS; don't confuse admin
 user with the Role ADMIN</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#services.gui.UserService.ADMIN_USERNAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ADMIN_PASSWORD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ADMIN_PASSWORD</h4>
<pre>public static final&nbsp;java.lang.String ADMIN_PASSWORD</pre>
<div class="block">Default admin password; the admin user is created during the first initialization of JATOS; don't confuse admin
 user with the Role ADMIN</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#services.gui.UserService.ADMIN_PASSWORD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ADMIN_NAME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ADMIN_NAME</h4>
<pre>public static final&nbsp;java.lang.String ADMIN_NAME</pre>
<div class="block">Default admin name; the admin user is created during the first initialization of JATOS; don't confuse admin user
 with the Role ADMIN</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#services.gui.UserService.ADMIN_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="retrieveUser-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveUser</h4>
<pre>public&nbsp;<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;retrieveUser(java.lang.String&nbsp;normalizedUsername)
                  throws <a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></pre>
<div class="block">Retrieves the user with the given username from the DB. Throws an Exception if it doesn't exist.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></code></dd>
</dl>
</li>
</ul>
<a name="bindToUserAndPersist-models.gui.NewUserModel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bindToUserAndPersist</h4>
<pre>public&nbsp;void&nbsp;bindToUserAndPersist(<a href="../../models/gui/NewUserModel.html" title="class in models.gui">NewUserModel</a>&nbsp;newUserModel)</pre>
<div class="block">Creates a user, sets password hash and persists him. Creates and persists a JatosWorker for the user.</div>
</li>
</ul>
<a name="createAndPersistUser-models.common.User-java.lang.String-boolean-models.common.User.AuthMethod-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAndPersistUser</h4>
<pre>public&nbsp;void&nbsp;createAndPersistUser(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user,
                                 java.lang.String&nbsp;password,
                                 boolean&nbsp;adminRole,
                                 <a href="../../models/common/User.AuthMethod.html" title="enum in models.common">User.AuthMethod</a>&nbsp;authMethod)</pre>
<div class="block">Creates a user, sets password hash and persists them. Creates and persists an JatosWorker for the user.</div>
</li>
</ul>
<a name="updatePassword-models.common.User-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePassword</h4>
<pre>public&nbsp;void&nbsp;updatePassword(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user,
                           java.lang.String&nbsp;newPassword)</pre>
<div class="block">Change password and persist user.</div>
</li>
</ul>
<a name="toggleActive-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toggleActive</h4>
<pre>public&nbsp;void&nbsp;toggleActive(java.lang.String&nbsp;normalizedUsername,
                         boolean&nbsp;active)
                  throws <a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a>,
                         <a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></code></dd>
<dd><code><a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></code></dd>
</dl>
</li>
</ul>
<a name="changeSuperuserRole-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeSuperuserRole</h4>
<pre>public&nbsp;boolean&nbsp;changeSuperuserRole(java.lang.String&nbsp;normalizedUsername,
                                   boolean&nbsp;superuser)
                            throws <a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a>,
                                   <a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></pre>
<div class="block">Adds or removes SUPERUSER role of the user with the given username and persists the change.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></code></dd>
<dd><code><a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></code></dd>
</dl>
</li>
</ul>
<a name="changeAdminRole-java.lang.String-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeAdminRole</h4>
<pre>public&nbsp;boolean&nbsp;changeAdminRole(java.lang.String&nbsp;normalizedUsername,
                               java.lang.Boolean&nbsp;admin)
                        throws <a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a>,
                               <a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></pre>
<div class="block">Adds or removes ADMIN role of the user with the given username and persists the change. If the parameter admin
 is true the ADMIN role will be set and if it's false it will be removed. Returns true if the user has the role in
 the end - or false if he hasn't.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></code></dd>
<dd><code><a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></code></dd>
</dl>
</li>
</ul>
<a name="setLastLogin-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastLogin</h4>
<pre>public&nbsp;void&nbsp;setLastLogin(java.lang.String&nbsp;normalizedUsername)</pre>
</li>
</ul>
<a name="removeUser-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeUser</h4>
<pre>public&nbsp;void&nbsp;removeUser(java.lang.String&nbsp;normalizedUsername)
                throws <a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a>,
                       <a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a>,
                       java.io.IOException</pre>
<div class="block">Removes the User belonging to the given username from the database. It also removes all studies where this user
 is
 the last member (which subsequently removes all components, results and the study assets too).</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exceptions/gui/NotFoundException.html" title="class in exceptions.gui">NotFoundException</a></code></dd>
<dd><code><a href="../../exceptions/gui/ForbiddenException.html" title="class in exceptions.gui">ForbiddenException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="setLastSeen-models.common.User-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setLastSeen</h4>
<pre>public&nbsp;void&nbsp;setLastSeen(<a href="../../models/common/User.html" title="class in models.common">User</a>&nbsp;user)</pre>
<div class="block">Sets the time of the last activity of the given user</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../services/gui/UploadUnmarshaller.html" title="class in services.gui"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../services/gui/WorkerService.html" title="class in services.gui"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?services/gui/UserService.html" target="_top">Frames</a></li>
<li><a href="UserService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
