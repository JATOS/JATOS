@* Component result data Modal *@
<div class="modal fade" id="componentResultDataModal" tabindex="-1" data-bs-config='{"backdrop":true, "focus":true, "keyboard":true}'>
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"></h5>
                <button type="button" class="btn btn-close btn-nav" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="card card-body">
                    <pre><code class="text-wrap text-break" id="componentResultData"></code></pre>
                    <span class="btn-clipboard btn-clipboard-top-right no-info-icon" data-toggle="tooltip" title="Copy to clipboard"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<script @{helper.CSPNonce.attr} type="module">
    import * as Alerts from "@routes.Assets.versioned("lib/jatos-gui/javascripts/alerts.js")";
    import * as Helpers from "@routes.Assets.versioned("lib/jatos-gui/javascripts/helpers.js")";
    import * as CopyToClipboard from "@routes.Assets.versioned("lib/jatos-gui/javascripts/copyToClipboard.js")";

    $('#resultsTable').on('click', '.info button.show-all', function() {
        const componentResultId = $(this).closest('[id|=componentResultInfo]').data().id;
        $('#componentResultDataModal .modal-title').text("Data of component result with ID " + componentResultId);
        $('#componentResultData').text("");
        $.ajax({
            url: window.routes.ComponentResults.exportSingleResultData(componentResultId),
            success : function(result) {
                $('#componentResultData').text(result);
                $('#componentResultDataModal').modal('show');
            },
            error : function(err) {
                Alerts.error(err.responseText);
            }
        });
    });

    $('#componentResultDataModal').on('click', '.btn-clipboard', CopyToClipboard.onClick);

</script>